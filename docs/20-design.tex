\chapter{Конструкторская часть}

В данном разделе представлены требования к программному обеспечению, а также схемы выбранных для решения поставленной задачи алгоритма.

\section{Требования к программному обеспечению}

Программа должна предоставлять доступ к функционалу:
\begin{itemize}
	\item открытие DNG последовательностей;
	\item настройка параметров изображения;
	\item выбор показываемого кадра
	\item проигрывание кадров;
	\item сохранение обработанного видео (<----- не успею наверное...).
\end{itemize}

К программе предъявляются следующие требования:
\begin{itemize}
	\item время обработки кадра должно быть менее 1/30 секунды для проигрывания основных частот кадров.
\end{itemize}

\subsection{Алгоритм билинейной интерполяции}
\clearpage
\begin{algorithm}[H]
	\caption{Билинейная интерполяция}
	\label{alg:bilin}
	\begin{algorithmic}[1]
		\State $in$ $\gets$ вектор с данными с сенсора камеры
		\State $height$ $\gets$ высота изображения $DomColor$
		\State $width$ $\gets$ ширина изображения
		\State $out$ $\gets$ вектор с интерполированными цветами
		\For{$y \gets 0$ to $height$}
			\For{$x \gets 0$ to $width$}
			\State $C$ $\gets$ значение цвета в точке $x,y$
			\If {пиксель красный}
					\State $out_{3 * (y * width + x) + 0}$ $\gets$ $C$
					\State $out_{3 * (y * width + x) + 1}$ $\gets$ $(in_{x, y-1} + in_{x, y + 1} + in_{x - 1, y} + in_{x + 1, y}) / 4$
					\State $out_{3 * (y * width + x) + 2}$ $\gets$ $(in_{x-1, y-1} + in_{x-1, y+1} + in_{x+1, y-1} + in_{x+1, y+1}) / 4$
			\EndIf
			\If {пиксель зеленый И соседи красные}
					\State $out_{3 * (y * width + x) + 0}$ $\gets$ $(in_{x-1, y} + in_{x+1, y}) / 2$
					\State $out_{3 * (y * width + x) + 1}$ $\gets$ $C$
					\State $out_{3 * (y * width + x) + 2}$ $\gets$ $(in_{x, y - 1} + in_{x, y+1}) / 2$
			\EndIf
			\If {пиксель зеленый И соседи синие}
					\State $out_{3 * (y * width + x) + 0}$ $\gets$ $(in_{x, y - 1} + in_{x, y+1}) / 2$
					\State $out_{3 * (y * width + x) + 1}$ $\gets$ $C$
					\State $out_{3 * (y * width + x) + 2}$ $\gets$ $(in_{x-1, y} + in_{x+1, y}) / 2$
			\EndIf
			\If {пиксель синий}
					\State $out_{3 * (y * width + x) + 0}$ $\gets$ $(in_{x-1, y-1} + in_{x-1, y+1} + in_{x+1, y-1} + in_{x+1, y+1}) / 4$
					\State $out_{3 * (y * width + x) + 1}$ $\gets$ $(in_{x, y-1} + in_{x, y + 1} + in_{x - 1, y} + in_{x + 1, y}) / 4$
					\State $out_{3 * (y * width + x) + 2}$ $\gets$ $C$
			\EndIf
		\EndFor
	\EndFor
	\end{algorithmic}
\end{algorithm}

\subsection{Алгоритм интерполяции Malvar-He-Cutler}
\begin{algorithm}[H]
	\caption{Malvar-He-Cutler}
	\label{alg:mhc}
	\begin{algorithmic}[1]
		\State $in$ $\gets$ вектор с данными с сенсора камеры
		\State $height$ $\gets$ высота изображения $DomColor$
		\State $width$ $\gets$ ширина изображения
		\State $out$ $\gets$ вектор с интерполированными цветами
		\State $\alpha$ $\gets$ $\frac{1}{2}$
		\State $\beta$ $\gets$ $\frac{5}{8}$
		\State $\gamma$ $\gets$ $\frac{3}{4}$
		\For{$y \gets 0$ to $height$}
		\For{$x \gets 0$ to $width$}
		\State $C$ $\gets$ значение цвета в точке $x,y$
		\State $lapl$ $\gets$ $C - (in_{x-2, y} + in_{x+2, y} + in_{x, y-2} + in_{x, y+2}) / 4$
		\If {пиксель красный}
		\State $out_{3 * (y * width + x) + 0}$ $\gets$ $C$
		\State $out_{3 * (y * width + x) + 1}$ $\gets$ $(in_{x, y-1} + in_{x, y + 1} + in_{x - 1, y} + in_{x + 1, y}) / 4 + \alpha * lapl$
		\State $out_{3 * (y * width + x) + 2}$ $\gets$ $(in_{x-1, y-1} + in_{x-1, y+1} + in_{x+1, y-1} + in_{x+1, y+1}) / 4 + \alpha * lapl$
		\EndIf
		\If {пиксель синий}
		\State $out_{3 * (y * width + x) + 0}$ $\gets$ $(in_{x-1, y-1} + in_{x-1, y+1} + in_{x+1, y-1} + in_{x+1, y+1}) / 4 + \gamma * lapl$
		\State $out_{3 * (y * width + x) + 1}$ $\gets$ $(in_{x, y-1} + in_{x, y + 1} + in_{x - 1, y} + in_{x + 1, y}) / 4 + \gamma * lapl$
		\State $out_{3 * (y * width + x) + 2}$ $\gets$ $C$
		\EndIf
		\State lapl $\gets$ $C - (in_{x-1, y-1} + in_{x-1, y+1} + in_{x, y-2} + in_{x, y+2}+ in_{x+1, y-1}+ in_{x+1, y+1}+ in_{x-2, y}+ in_{x+2, y}) / 8$
		\If {пиксель зеленый И соседи красные}
		\State $out_{3 * (y * width + x) + 0}$ $\gets$ $(in_{x-1, y} + in_{x+1, y}) / 2 + \beta * lapl$
		\State $out_{3 * (y * width + x) + 1}$ $\gets$ $C$
		\State $out_{3 * (y * width + x) + 2}$ $\gets$ $(in_{x, y - 1} + in_{x, y+1}) / 2 + \beta * lapl$
		\EndIf
		\If {пиксель зеленый И соседи синие}
		\State $out_{3 * (y * width + x) + 0}$ $\gets$ $(in_{x, y - 1} + in_{x, y+1}) / 2 + \beta * lapl$
		\State $out_{3 * (y * width + x) + 1}$ $\gets$ $C$
		\State $out_{3 * (y * width + x) + 2}$ $\gets$ $(in_{x-1, y} + in_{x+1, y}) / 2 + \beta * lapl$
		\EndIf
		\EndFor
		\EndFor
	\end{algorithmic}
\end{algorithm}

\subsection{Диаграма классов}

Нужна ? или айдеф? или и то и то?

\subsection{Или (и) айдеф}

\section*{Вывод}

В данном разделе были представлены требования к программному обеспечению и описаны реализуемые алгоритмы.

